# Content Importer (Squarespace WordPress XML)

This project includes a user‑guided importer that reads a Squarespace WordPress export (`.xml`) and maps content into the site’s local data store. It is designed for the **Project**, **Team**, and **News** sections.

## Overview
- Entry point: `import` route (hidden from the About page by default).
- Input: WordPress export XML generated by Squarespace.
- Output: Local storage updates (no server writes).

The importer is heuristic‑assisted (auto‑selects likely pages) but always user‑confirmable before writing data.

## Accessing the Importer
The importer is routed but not linked in the UI.

Open the app and navigate to:
```
/?r=import
```

## Data Model Additions
Content is stored under `siteContent` in the database state.

Files:
- `src/types.ts`
- `src/storage.ts`

Shape:
```
siteContent: {
  project?: { title, intro?, blocks[], source? }
  news?: [{ id, title, date?, blocks[], source?, categories? }]
}
```

Team profiles are stored in `masterPeople` with `categories: ["team"]`.

## Import Flow
1. **Upload XML**  
   The file is parsed in‑browser; no network calls are made.
2. **Project mapping**  
   Choose a single page to populate the Project content.
3. **Team mapping**  
   Choose a team index page. The importer extracts internal links from that page to auto‑select individual team profiles. You can override selections.
4. **News mapping**  
   Defaults to WordPress posts. Optionally include page candidates (workshops, press, positions, etc).
5. **Import**  
   Writes to local storage via `saveState`.

## Parsing Heuristics
The importer uses simple HTML extraction rules to keep content clean and predictable.

Project:
- Builds blocks from headings (`h1–h4`) and paragraph‑level content.
- The first paragraph becomes `intro` by default.

Team:
- Uses the first heading to infer:
  - Line 1 → `name`
  - Line 2 → `role`
  - Line 3 → `place`
- Concatenates paragraph text into `description`.
- If no paragraphs, it falls back to the first image `alt` text.

News:
- Converts each selected post or page into a `NewsItem`.
- Dates are normalized to `YYYY-MM-DD` where possible.

## Storage Behavior
The importer updates local storage keys used by the app:
- `AOS_MASTER_PEOPLE`
- `AOS_SITE_CONTENT`

Options:
- **Replace team**: removes existing team entries before import.
- **Replace news**: replaces existing news array.

After import, use the provided reload buttons to refresh Project/Team/News pages.

## Limitations
- Images are not imported or displayed (team portraits are placeholders).
- HTML is converted to plain text blocks (no rich formatting).
- Only local storage is updated; a hard refresh is required to view imported content.

## Clearing Imported Content
To reset imported content, clear the local storage keys above in the browser dev tools, or replace with a fresh `seed.json` on next load.

## Implementation References
- Import UI: `src/pages/admin/ImportPage.tsx`
- Import styles: `src/pages/admin/import.css`
- Project rendering: `src/pages/about/ProjectPage.tsx`
- News rendering: `src/pages/about/NewsPage.tsx`
- Storage: `src/storage.ts`
